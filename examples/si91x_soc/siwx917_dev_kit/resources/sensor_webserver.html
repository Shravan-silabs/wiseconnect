<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Embedded Sensor Demo</title>
<style><!--  -->
body {
font-family: Arial, sans-serif;
margin: 0;
padding: 0;
display: flex;
justify-content: center;
align-items: center;
height: 100vh;
background-color: #f0f0f0;
}
#refresh-form {
text-align: center;
padding: 20px;
border: 1px solid #ccc;
border-radius: 8px;
background-color: #fff;
}
input[type="submit"] {
width: 100%;
padding: 10px;
margin: 10px 0;
border: none;
border-radius: 5px;
background-color: #007bff;
color: #fff;
cursor: pointer;
}
input[type="submit"]:hover {
background-color: #0056b3;
}
#heading {
margin-bottom: 20px;
width: 100%;
}
.form-row {
display: flex;
justify-content: space-between;
align-items: center;
margin: 10px 0;
}
.form-row label {
width: 100px;
text-align: right;
margin-right: 10px;
white-space: nowrap;
}
.form-row input,
.form-row select {
flex: 2;
}
#sensor-data {
    text-align: center;
    padding: 20px;
    border: 1px solid #ccc;
    border-radius: 8px;
    background-color: #fff;
    margin-top: 20px;
}
</style>
</head>
<body>
<form id="refresh-form" action="/scan" method="get">
<h3 id="heading">Embedded Sensor Demo</h3>
<input type="submit" value="Refresh">
<div id="sensor-data">
    <table>
        <tr>
            <th style="text-align: left;">Sensor</th>
            <th style="text-align: left;">Data</th>
            <th style="text-align: center;">Value</th>
            <th style="text-align: center;">Unit</th>
        </tr>
        <tr>
            <td style="text-align: left;">LED</td>
            <td style="text-align: left;">Red</td>
            <td style="text-align: center;" id="red-value">---</td>
            <td style="text-align: center;">---</td>
        </tr>
        <tr>
            <td></td>
            <td style="text-align: left;">Green</td>
            <td style="text-align: center;" id="green-value">---</td>
            <td style="text-align: center;">---</td>
        </tr>
        <tr>
            <td></td>
            <td style="text-align: left;">Blue</td>
            <td style="text-align: center;" id="blue-value">---</td>
            <td style="text-align: center;">---</td>
        </tr>
        <tr>
            <td style="text-align: left;">Light</td>
            <td style="text-align: left;">Ambient</td>
            <td style="text-align: center;" id="ambient-value">---</td>
            <td style="text-align: center;">Lux</td>
        </tr>
        <tr>
            <td></td>
            <td style="text-align: left;">White</td>
            <td style="text-align: center;" id="white-value">---</td>
            <td style="text-align: center;">Lux</td>
        </tr>
        <tr>
            <td style="text-align: left;">Temperature</td>
            <td style="text-align: left;">Temperature</td>
            <td style="text-align: center;" id="temperature-value">---</td>
            <td style="text-align: center;">Â°C</td>
        </tr>
        <tr>
            <td style="text-align: left;">Humidity</td>
            <td style="text-align: left;">Humidity</td>
            <td style="text-align: center;" id="humidity-value">---</td>
            <td style="text-align: center;">%</td>
        </tr>
        <tr>
            <td style="text-align: left;">Accelerometer</td>
            <td style="text-align: left;">X</td>
            <td style="text-align: center;" id="accelerometer-x-value">---</td>
            <td style="text-align: center;">---</td>
        </tr>
        <tr>
            <td></td>
            <td style="text-align: left;">Y</td>
            <td style="text-align: center;" id="accelerometer-y-value">---</td>
            <td style="text-align: center;">---</td>
        </tr>
        <tr>
            <td></td>
            <td style="text-align: left;">Z</td>
            <td style="text-align: center;" id="accelerometer-z-value">---</td>
            <td style="text-align: center;">---</td>
        </tr>
        <tr>
            <td style="text-align: left;">Gyroscope</td>
            <td style="text-align: left;">X</td>
            <td style="text-align: center;" id="gyroscope-x-value">---</td>
            <td style="text-align: center;">---</td>
        </tr>
        <tr>
            <td></td>
            <td style="text-align: left;">Y</td>
            <td style="text-align: center;" id="gyroscope-y-value">---</td>
            <td style="text-align: center;">---</td>
        </tr>
        <tr>
            <td></td>
            <td style="text-align: left;">Z</td>
            <td style="text-align: center;" id="gyroscope-z-value">---</td>
            <td style="text-align: center;">---</td>
        </tr>
        <tr>
            <td style="text-align: left;">Microphone</td>
            <td style="text-align: left;">Sound Level</td>
            <td style="text-align: center;" id="microphone-value">---</td>
            <td style="text-align: center;">Decibel</td>
        </tr>
    </table>
</div>
</form>
<script>
document.getElementById('refresh-form').addEventListener('submit', function (event) {
    event.preventDefault();

    var xhr = new XMLHttpRequest();
    xhr.open('GET', '/all_sensors', true);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.onload = function() {
        if (xhr.status === 200) {
            var response = JSON.parse(xhr.responseText);
            var redValue = document.getElementById('red-value');
            var greenValue = document.getElementById('green-value');
            var blueValue = document.getElementById('blue-value');
            var ambientValue = document.getElementById('ambient-value');
            var whiteValue = document.getElementById('white-value');
            var temperatureValue = document.getElementById('temperature-value');
            var humidityValue = document.getElementById('humidity-value');
            var accelerometerXValue = document.getElementById('accelerometer-x-value');
            var accelerometerYValue = document.getElementById('accelerometer-y-value');
            var accelerometerZValue = document.getElementById('accelerometer-z-value');
            var gyroscopeXValue = document.getElementById('gyroscope-x-value');
            var gyroscopeYValue = document.getElementById('gyroscope-y-value');
            var gyroscopeZValue = document.getElementById('gyroscope-z-value');
            var microphoneValue = document.getElementById('microphone-value');

            redValue.textContent = response.led.red;
            greenValue.textContent = response.led.green;
            blueValue.textContent = response.led.blue;

            ambientValue.textContent = response.light.ambient_light_lux;
            whiteValue.textContent = response.light.white_light_lux;

            temperatureValue.textContent = response.temperature.temperature_celcius;
    
            humidityValue.textContent = response.humidity.humidity_percentage;
    
            accelerometerXValue.textContent = response.accelerometer.x;
            accelerometerYValue.textContent = response.accelerometer.y;
            accelerometerZValue.textContent = response.accelerometer.z;
    
            gyroscopeXValue.textContent = response.gyroscope.x;
            gyroscopeYValue.textContent = response.gyroscope.y;
            gyroscopeZValue.textContent = response.gyroscope.z;
    
            microphoneValue.textContent = response.microphone.microphone_decibel;
        };
    };
    xhr.send();
});
</script>
</body>
</html>
